import React, {Component} from 'react';


import LoginForm from 'components/loginForm';
import { login, getUserSession } from "actions";
import { createStore, combineReducers, applyMiddleware } from 'redux';
import { routerMiddleware, push } from 'react-router-redux'
import {connect} from "react-redux";
import PropTypes from 'prop-types';

class Login extends Component {
    constructor (props) {
        super(props)
        this.redirect = this.redirect.bind(this)
    }
    redirect(){
            this.props.router.push('/dashboard');
    }
    componentWillMount(){
        if(this.props.isLogin){
            this.props.router.push('/dashboard');
        }
    }
    render(){
        if(this.props.isLogin){
            this.redirect();
        }
        console.log(this);
             return (
                 <div className='page-center-layout'>
                     <LoginForm/>
                     <button onClick={this.redirect}>Login</button>
                 </div>
             )
         }
}
const mapStateToProps = state => {
    return {
        isLogin: state.userSession.isLogin,
        store: state
    }
}

const mapDispatchToProps = {
    login,
    getUserSession
};

Login.contextTypes = {
    router: PropTypes.object.isRequired
}
export default connect(mapStateToProps, mapDispatchToProps)(Login)

